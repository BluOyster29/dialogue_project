<?xml version="1.0" encoding="utf-8"?>
<vxml version="2.1" xmlns="http://www.w3.org/2001/vxml"
      xmlns:voxeo="http://community.voxeo.com/xmlns/vxml">

    <script> <![CDATA[ 
    
    var score = 0;
    var tries = 3;

    function reset_tries(tries){
        return tries = 3;
    }

    function add_point(score) {
        return score + 1;
    }

    function minus_point(score) {
        return score - 1;
    }
        
  ]]> </script> 

  
    
    

    <form id="question_one">
        <field name="q1">
	  <grammar src="grammars/easy_grammar.xml"/>
            <prompt bargein ="false">
            <grammar src="grammars/easy_grammar.xml#q1"/>
                Repeat after me.
                Greek, grapes
            </prompt>
            <nomatch>
                <if cond="tries == '0'">
                    <prompt bargein ="false">
                        sorry you have run out of tries, next question.
                    </prompt>
                    <goto next="questionTwo"/>
                </if>
                <else/>
                    <assign name="tries" expr="minus_point(tries)"/>
                    <prompt>
                        you have <value expr="tries"/> remaining. 
                    </prompt>
            </nomatch>
        </field>

        <filled>
          <prompt>
	        You said: <value expr="q1$.utterance"/>,
	        with the interpretation <value expr="q1$.interpretation"/>
	        and with a confidence of <value expr="q1$.confidence"/>
	        <break time ="2s"/>
	    </prompt>
	    <goto next="#questionTwo"/>
	    </filled>
    </form>

    <form id ="questionTwo">
        <field name = "q2">
            <grammar src="grammars/easy_grammar.xml"/>
            <block> ok here is the second one</block>
            <prompt>
                <grammar src="grammars/easy_grammar.xml#q2"/>
                Unique, New, York.
            </prompt>
        </field>
        <filled>
          <prompt>
	    You said: <value expr="q2$.utterance"/>,
	    with the interpretation <value expr="q2$.interpretation"/>
	    and with a confidence of <value expr="q2$.confidence"/>
	    <break time ="2s"/>
	  </prompt>
	  <goto next="#question_three"/>
	</filled>
    </form>
    
    <form id ="question_three">
        <field name = "q3">
            <grammar src="grammars/easy_grammar.xml"/>
            <prompt>
                <grammar src="grammars/easy_grammar.xml#q3"/>
                Getting better, nice! Here comes another.
                Red, lorry, yellow, lorry
            </prompt>
        </field>
        <filled>
          <prompt>
	    You said: <value expr="q3$.utterance"/>,
	    with the interpretation <value expr="q3$.interpretation"/>
	    and with a confidence of <value expr="q3$.confidence"/>
	    <break time ="2s"/>
	  </prompt>
	  <goto next="#question_four"/>
	</filled>
    </form>

    <form id ="question_four">
        <field name = "q4">
            <grammar src="grammars/easy_grammar.xml"/>
            <prompt>
                <grammar src="grammars/easy_grammar.xml#q4"/>
                Well done. Now here is another, repeat after me.
                She says cheese
            </prompt>
        </field>
        <filled>
          <prompt>
	    You said: <value expr="q4$.utterance"/>,
	    with the interpretation <value expr="q4$.interpretation"/>
	    and with a confidence of <value expr="q4$.confidence"/>
	    <break time ="2s"/>
	  </prompt>
	  <goto next="#question_five"/>
	</filled>
    </form>

    <form id ="question_five">
        <field name = "q5">
            <grammar src="grammars/easy_grammar.xml"/>
            <prompt>
                <grammar src="grammars/easy_grammar.xml#q5"/>
                Here is the final easy twister. It's a bit tougher than the last.
                Fred fed Ted bread and Ted fed Fred Bread 
            </prompt>
        </field>
        <filled>
          <prompt>
	    You said: <value expr="q5$.utterance"/>,
	    with the interpretation <value expr="q5$.interpretation"/>
	    and with a confidence of <value expr="q5$.confidence"/>
	    <break time ="2s"/>
	  </prompt>
	</filled>
    </form>
    <!--
    <form id="testing">
       
        <field name="tryOne">
            <prompt>
                Your score equals <value expr="score"/> .         
            </prompt>
            <option> Nice</option>
        </field>
        <filled>
            If we add 1, it will be <var name="score" expr="add_point(score)"/> 
            <value expr="score"/>. However if you lose a point, we will take away 1. 
            <var name="score" expr="minus_point(score)"/> which will make your score 
            <value expr="score"/> again. lol
        </filled>
    </form>
    -->
</vxml>
